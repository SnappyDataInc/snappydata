//INCLUDE $JTESTS/io/snappydata/hydra/streaming_sink/startClusters.inc;

INITTASK     taskClass   = io.snappydata.hydra.adAnalytics.SnappyAdAnalyticsTest taskMethod  = HydraTask_StartKafkaTopic
    io.snappydata.hydra.cluster.SnappyPrms-kafkaTopic="streamingSinkTopic"
    runMode = always
    threadGroups = snappyThreads;

/*
INITTASK     taskClass   = io.snappydata.hydra.adAnalytics.SnappyAdAnalyticsTest taskMethod  = HydraTask_executeSnappyJob
    io.snappydata.hydra.cluster.SnappyPrms-jobClassNames = io.snappydata.hydra.streaming_sink.CreateTableInSnappyJob
    io.snappydata.hydra.cluster.SnappyPrms-appPropsForJobServer = "isRowTable=${isRowTable},withKeyColumn=${withKeyColumn}"
    io.snappydata.hydra.cluster.SnappyPrms-userAppJar = snappydata-store-scala-tests*tests.jar
    threadGroups = snappyThreads;
*/

INITTASK     taskClass   = io.snappydata.hydra.adAnalytics.SnappyAdAnalyticsTest taskMethod  = HydraTask_executeSnappyStreamingJob
    io.snappydata.hydra.cluster.SnappyPrms-streamingJobClassNames = io.snappydata.hydra.vapoc.SnappyStreamingSinkJob
    io.snappydata.hydra.cluster.SnappyPrms-appPropsForJobServer = "kafkaTopic=streamingSinkTopic,tableName=patients,streaming.batch_interval=100"
    io.snappydata.hydra.cluster.SnappyPrms-userAppName = streamingApp
    io.snappydata.hydra.cluster.SnappyPrms-userAppJar = snappydata-store-scala-tests*tests.jar
    threadGroups = snappyThreads;

INITTASK     taskClass   = io.snappydata.hydra.adAnalytics.SnappyAdAnalyticsTest taskMethod = HydraTask_generateAndPublish
    io.snappydata.hydra.cluster.SnappyPrms-streamingJobClassNames = "io.snappydata.hydra.vapoc.KafkaMessageProducer"
    io.snappydata.hydra.cluster.SnappyPrms-appPropsForJobServer = "/home/sonal/work/patients.csv streamingSinkTopic"
    io.snappydata.hydra.cluster.SnappyPrms-userAppJar = snappydata-store-scala-tests*tests.jar
    threadGroups = snappyThreads;

CLOSETASK     taskClass   = io.snappydata.hydra.adAnalytics.SnappyAdAnalyticsTest taskMethod  = HydraTask_stopStreamingJob
    io.snappydata.hydra.cluster.SnappyPrms-streamingJobClassNames = io.snappydata.hydra.adAnalytics.StopSnappyStreamingJob
    io.snappydata.hydra.cluster.SnappyPrms-userAppJar = snappydata-store-scala-tests*tests.jar
    threadGroups = snappyThreads;

CLOSETASK  taskClass   = io.snappydata.hydra.cluster.SnappyTest taskMethod  = HydraTask_executeSQLScripts
    io.snappydata.hydra.cluster.SnappyPrms-logFileName = internal_query_execution.log
    io.snappydata.hydra.cluster.SnappyPrms-sqlScriptNames = query_internal_table.sql
    threadGroups = snappyThreads;

//INCLUDE $JTESTS/io/snappydata/hydra/streaming_sink/stopClusters.inc;

