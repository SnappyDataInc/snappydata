hydra.Prms-testRequirement = "Test to verify authentication of custer startUp and authorization of DMLs
                              with Security in smart Connector mode";
hydra.Prms-testDescription = "In this test secure snappycluster is started .A user creates row/column
                              tables.Admin user grants permissions to perform various dml ops .Another
                              user connects to snappy cluster in smart connector mode and performs ops ,
                              exception is thrown depending on if the user is permitted or not to perform the ops ";

io.snappydata.hydra.security.SnappySecurityPrms-isSecurity = true;  
INCLUDE $JTESTS/io/snappydata/hydra/northwind/startDualModeCluster.conf;

/*INITTASK    taskClass   = io.snappydata.hydra.security.SnappySecurityTest taskMethod  = HydraTask_GrantSchemaPermisson
            io.snappydata.hydra.security.SnappySecurityPrms-userName = gemfire2
            io.snappydata.hydra.security.SnappySecurityPrms-passWord = gemfire2
            io.snappydata.hydra.security.SnappySecurityPrms-isGrant = true
            threadGroups = snappyThreads;*/

INITTASK    taskClass   = io.snappydata.hydra.security.SnappySecurityTest taskMethod  = HydraTask_executeSQLScripts
            io.snappydata.hydra.cluster.SnappyPrms-sqlScriptNames = create_and_load_columnTables_persistent.sql
            io.snappydata.hydra.cluster.SnappyPrms-dataLocation = ${dataFilesLocation}
            io.snappydata.hydra.security.SnappySecurityPrms-userName = gemfire2
            io.snappydata.hydra.security.SnappySecurityPrms-passWord = gemfire2
            threadGroups = snappyThreads;

INITTASK   taskClass   = io.snappydata.hydra.security.SnappySecurityTest taskMethod  = HydraTask_performGrantRevokeCmd
           io.snappydata.hydra.security.SnappySecurityPrms-userName = gemfire3 gemfire4
           io.snappydata.hydra.security.SnappySecurityPrms-passWord = gemfire3 gemfire4
           io.snappydata.hydra.security.SnappySecurityPrms-isGrant = true
           io.snappydata.hydra.security.SnappySecurityPrms-onSchema = gemfire2.employees gemfire2.categories
           io.snappydata.hydra.security.SnappySecurityPrms-dmlOperations = SELECT INSERT UPDATE DELETE
           threadGroups = snappyThreads;

INITTASK    taskClass   = io.snappydata.hydra.cluster.SnappyTest taskMethod  = HydraTask_executeSparkJob
            io.snappydata.hydra.cluster.SnappyPrms-sparkJobClassNames = io.snappydata.hydra.security.CreateAndLoadTablesSparkApp
            io.snappydata.hydra.cluster.SnappyPrms-userAppArgs = "${dataFilesLocation} ${dataLocation} true gemfire2.employees gemfire2.categories 11 0 true"
            io.snappydata.hydra.cluster.SnappyPrms-sparkSubmitExtraPrms = " --conf spark.snappydata.store.user=gemfire4 --conf spark.snappydata.store.password=gemfire4"
            threadGroups = snappyThreads
            ;

INITTASK    taskClass   = io.snappydata.hydra.cluster.SnappyTest taskMethod  = HydraTask_executeSparkJob
            io.snappydata.hydra.cluster.SnappyPrms-sparkJobClassNames = io.snappydata.hydra.security.CreateAndLoadTablesSparkApp
            io.snappydata.hydra.cluster.SnappyPrms-userAppArgs = "${dataFilesLocation} ${dataLocation} true gemfire2.employees gemfire2.categories 11 0 true"
            io.snappydata.hydra.cluster.SnappyPrms-sparkSubmitExtraPrms = " --conf spark.snappydata.store.user=gemfire3 --conf spark.snappydata.store.password=gemfire3"
            threadGroups = snappyThreads
            ;

INITTASK   taskClass   = io.snappydata.hydra.security.SnappySecurityTest taskMethod  = HydraTask_performGrantRevokeCmd
           io.snappydata.hydra.security.SnappySecurityPrms-userName = gemfire3 gemfire4
           io.snappydata.hydra.security.SnappySecurityPrms-passWord = gemfire3 gemfire4
           io.snappydata.hydra.security.SnappySecurityPrms-isRevoke = true
           io.snappydata.hydra.security.SnappySecurityPrms-onSchema = gemfire2.employees gemfire2.categories
           io.snappydata.hydra.security.SnappySecurityPrms-dmlOperations = SELECT INSERT UPDATE DELETE
           threadGroups = snappyThreads;

INITTASK    taskClass   = io.snappydata.hydra.cluster.SnappyTest taskMethod  = HydraTask_executeSparkJob
            io.snappydata.hydra.cluster.SnappyPrms-sparkJobClassNames = io.snappydata.hydra.security.CreateAndLoadTablesSparkApp
            io.snappydata.hydra.cluster.SnappyPrms-userAppArgs = "${dataFilesLocation} ${dataLocation} false gemfire2.employees gemfire2.categories 22 0 true"
            io.snappydata.hydra.cluster.SnappyPrms-sparkSubmitExtraPrms = " --conf spark.snappydata.store.user=gemfire3 --conf spark.snappydata.store.password=gemfire3"
            threadGroups = snappyThreads;

INITTASK    taskClass   = io.snappydata.hydra.cluster.SnappyTest taskMethod  = HydraTask_executeSparkJob
            io.snappydata.hydra.cluster.SnappyPrms-sparkJobClassNames = io.snappydata.hydra.security.CreateAndLoadTablesSparkApp
            io.snappydata.hydra.cluster.SnappyPrms-userAppArgs = "${dataFilesLocation} ${dataLocation} false gemfire2.employees gemfire2.categories 22 0 true"
            io.snappydata.hydra.cluster.SnappyPrms-sparkSubmitExtraPrms = " --conf spark.snappydata.store.user=gemfire4 --conf spark.snappydata.store.password=gemfire4"
            threadGroups = snappyThreads;
/*
INITTASK    taskClass   = io.snappydata.hydra.security.SnappySecurityTest taskMethod  = HydraTask_GrantSchemaPermisson
            io.snappydata.hydra.security.SnappySecurityPrms-userName = gemfire3
            io.snappydata.hydra.security.SnappySecurityPrms-passWord = gemfire3
            io.snappydata.hydra.security.SnappySecurityPrms-isGrant = true
            threadGroups = snappyThreads;*/

INITTASK    taskClass   = io.snappydata.hydra.security.SnappySecurityTest taskMethod  = HydraTask_executeSQLScripts
            io.snappydata.hydra.cluster.SnappyPrms-sqlScriptNames = create_and_load_columnTables_persistent.sql
            io.snappydata.hydra.cluster.SnappyPrms-dataLocation = ${dataFilesLocation}
            io.snappydata.hydra.security.SnappySecurityPrms-userName = gemfire3
            io.snappydata.hydra.security.SnappySecurityPrms-passWord = gemfire3
            threadGroups = snappyThreads;

INITTASK   taskClass   = io.snappydata.hydra.security.SnappySecurityTest taskMethod  = HydraTask_performGrantRevokeCmd
           io.snappydata.hydra.security.SnappySecurityPrms-userName = gemfire2 gemfire4
           io.snappydata.hydra.security.SnappySecurityPrms-passWord = gemfire2 gemfire4
           io.snappydata.hydra.security.SnappySecurityPrms-isGrant = true
           io.snappydata.hydra.security.SnappySecurityPrms-onSchema = gemfire3.employees gemfire3.categories
           io.snappydata.hydra.security.SnappySecurityPrms-dmlOperations = SELECT INSERT UPDATE DELETE
           threadGroups = snappyThreads;

INITTASK   taskClass   = io.snappydata.hydra.security.SnappySecurityTest taskMethod  = HydraTask_runQuery
           io.snappydata.hydra.security.SnappySecurityPrms-userName = gemfire1 gemfire2 gemfire3 gemfire4
           io.snappydata.hydra.security.SnappySecurityPrms-passWord = gemfire1 gemfire2 gemfire3 gemfire4
           io.snappydata.hydra.security.SnappySecurityPrms-dataLocation = ${dataLocation}
           io.snappydata.hydra.security.SnappySecurityPrms-onSchema = gemfire3.employees gemfire3.categories
           io.snappydata.hydra.security.SnappySecurityPrms-dmlOperations = SELECT INSERT UPDATE DELETE
           io.snappydata.hydra.security.SnappySecurityPrms-expectedExcptCnt = 22
           io.snappydata.hydra.security.SnappySecurityPrms-unExpectedExcptCnt = 0
           io.snappydata.hydra.security.SnappySecurityPrms-isGrant = true
           threadGroups = snappyThreads;


INCLUDE $JTESTS/io/snappydata/hydra/northwind/stopDualModeCluster.conf;

io.snappydata.hydra.cluster.SnappyPrms-userAppJar = snappydata-store-scala-tests*tests.jar;
io.snappydata.hydra.cluster.SnappyPrms-shufflePartitions = 6;
io.snappydata.hydra.cluster.SnappyPrms-serverMemory = 4g;
/*
io.snappydata.hydra.cluster.SnappyPrms-locatorLauncherProps = " -J-Dsnappydata.RESTRICT_TABLE_CREATION=true -auth-provider=LDAP -J-Dsnappydata.auth-ldap-server=ldap://192.168.1.162:389/ -user=user1 -password=gemfire1 -J-Dgemfirexd.auth-ldap-search-base=cn=sales-group,ou=sales,dc=example,dc=com -J-Dgemfirexd.auth-ldap-search-dn=cn=admin,dc=example,dc=com -J-Dgemfirexd.auth-ldap-search-pw=admin123";
io.snappydata.hydra.cluster.SnappyPrms-serverLauncherProps = " -J-Dsnappydata.RESTRICT_TABLE_CREATION=true -auth-provider=LDAP -J-Dsnappydata.auth-ldap-server=ldap://192.168.1.162:389/ -user=user1 -password=gemfire1 -J-Dgemfirexd.auth-ldap-search-base=cn=sales-group,ou=sales,dc=example,dc=com -J-Dgemfirexd.auth-ldap-search-dn=cn=admin,dc=example,dc=com -J-Dgemfirexd.auth-ldap-search-pw=admin123";
io.snappydata.hydra.cluster.SnappyPrms-leaderLauncherProps = " -J-Dsnappydata.RESTRICT_TABLE_CREATION=true -auth-provider=LDAP -J-Dsnappydata.auth-ldap-server=ldap://192.168.1.162:389/ -user=user1 -password=gemfire1 -J-Dgemfirexd.auth-ldap-search-base=cn=sales-group,ou=sales,dc=example,dc=com -J-Dgemfirexd.auth-ldap-search-dn=cn=admin,dc=example,dc=com -J-Dgemfirexd.auth-ldap-search-pw=admin123";
*/

io.snappydata.hydra.cluster.SnappyPrms-useSmartConnectorMode = true;
