hydra.Prms-testRequirement = "Test cdc in smart Connector mode for column tables ";
hydra.Prms-testDescription = "Test cdc in smart Connector mode for column tables";

INCLUDE $JTESTS/io/snappydata/hydra/northwind/startDualModeCluster.conf;

INITTASK    taskClass   = io.snappydata.hydra.cluster.SnappyTest taskMethod  = HydraTask_executeSQLScripts
            io.snappydata.hydra.cluster.SnappyPrms-sqlScriptNames = createAndLoadFewTables.sql
            io.snappydata.hydra.cluster.SnappyPrms-dataLocation = ${dataFilesLocation}
            threadGroups = snappyThreads;

INITTASK    taskClass  = io.snappydata.hydra.cluster.SnappyTest taskMethod  = HydraTask_executeSparkJob
            io.snappydata.hydra.cluster.SnappyPrms-sparkJobClassNames = io.snappydata.hydra.cdcConnector.CDCIngestionApp
            io.snappydata.hydra.cluster.SnappyPrms-sparkSubmitExtraPrms = " --jars /home/supriya/.m2/repository/com/microsoft/sqlserver/mssql-jdbc/6.1.0.jre8/mssql-jdbc-6.1.0.jre8.jar "
            io.snappydata.hydra.cluster.SnappyPrms-userAppArgs = "1000230 1000232"
            io.snappydata.hydra.cdcConnector.SnappyCDCPrms-appName= "CDCIngestionApp1"
            io.snappydata.hydra.cluster.SnappyPrms-userAppJar = snappydata-store-scala-tests*tests.jar
            threadGroups = snappyThreads;

INITTASK    taskClass  = io.snappydata.hydra.cluster.SnappyTest taskMethod  = HydraTask_executeSparkJob
            io.snappydata.hydra.cluster.SnappyPrms-sparkJobClassNames = io.snappydata.app.JavaCdcStreamingApp
            io.snappydata.hydra.cluster.SnappyPrms-sparkSubmitExtraPrms = " --jars /home/supriya/snappy/snappydata/snappy-connectors/jdbc-stream-connector/build-artifacts/scala-2.11/libs/snappydata-jdbc-stream-connector_2.11-0.9.2-SNAPSHOT.jar,/home/supriya/.m2/repository/com/microsoft/sqlserver/mssql-jdbc/6.1.0.jre8/mssql-jdbc-6.1.0.jre8.jar,/home/supriya/snappy/snappydata/dtests/build-artifacts/scala-2.11/libs/snappydata-store-scala-tests-0.1.0-SNAPSHOT-tests.jar  "
            io.snappydata.hydra.cluster.SnappyPrms-userAppArgs = "/home/supriya/snappy/snappydata/dtests/src/resources/scripts/cdcConnector/cdc_source_connection.properties /home/supriya/snappy/snappydata/dtests/src/resources/scripts/cdcConnector/source_destination_5tables.properties"
            io.snappydata.hydra.cluster.SnappyPrms-userAppJar = "/home/supriya/snappy/snappydata/snappy-poc/cdc/target/original-cdc-test-0.0.1.jar"
            io.snappydata.hydra.cdcConnector.SnappyCDCPrms-isCDCStream = true
            io.snappydata.hydra.cdcConnector.SnappyCDCPrms-appName= "JavaCdcStreamingApp"
            threadGroups = snappyThreads
            ;

TASK    taskClass  = io.snappydata.hydra.cluster.SnappyTest taskMethod  = HydraTask_executeSparkJob
             io.snappydata.hydra.cluster.SnappyPrms-sparkJobClassNames = io.snappydata.hydra.cdcConnector.CDCIngestionApp
             io.snappydata.hydra.cluster.SnappyPrms-sparkSubmitExtraPrms = " --jars /home/supriya/.m2/repository/com/microsoft/sqlserver/mssql-jdbc/6.1.0.jre8/mssql-jdbc-6.1.0.jre8.jar "
             io.snappydata.hydra.cluster.SnappyPrms-userAppArgs = "1000233 1000235"
             io.snappydata.hydra.cluster.SnappyPrms-userAppJar = snappydata-store-scala-tests*tests.jar
             io.snappydata.hydra.cdcConnector.SnappyCDCPrms-appName= "CDCIngestionApp2"
             threadGroups = snappyStoreThreads
             maxThreads = 1
             ;

TASK    taskClass  = io.snappydata.hydra.cdcConnector.SnappyCDCTest taskMethod  = HydraTask_runConcurrencyJob
            io.snappydata.hydra.cdcConnector.SnappyCDCPrms-threadCnt = ${threadCnt}
            io.snappydata.hydra.cdcConnector.SnappyCDCPrms-dataLocation = ${queryFilePath}
            io.snappydata.hydra.cdcConnector.SnappyCDCPrms-isScanQuery = false
            threadGroups = leadThreads
            maxThreads = 1;



INCLUDE $JTESTS/io/snappydata/hydra/northwind/stopDualModeCluster.conf;

hydra.Prms-maxResultWaitSec = 200;
hydra.Prms-totalTaskTimeSec = 360;
io.snappydata.hydra.cluster.SnappyPrms-shufflePartitions = 6;
io.snappydata.hydra.cluster.SnappyPrms-serverMemory = 4g;
io.snappydata.hydra.cdcConnector.SnappyCDCPrms-isCDC = true;
